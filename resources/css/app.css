@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==========================================================================
   Mobile Zoom & Responsive Fixes
   ========================================================================== */

/* Prevent horizontal overflow on zoom */
html,
body {
    overflow-x: hidden;
    width: 100%;
    max-width: 100vw;
}

/* Prevent iOS text size adjustment on orientation change */
html {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
}

/* Ensure all media scales correctly */
img,
video,
svg,
iframe,
embed,
object {
    max-width: 100%;
    height: auto;
}

/* Prevent horizontal scroll from child elements */
.min-h-screen {
    overflow-x: hidden;
}

/* Touch-friendly tap targets and prevent zoom on input focus (iOS) */
input,
textarea,
select,
button {
    font-size: 16px; /* Prevents iOS zoom on focus */
    touch-action: manipulation;
}

/* Prevent text overflow breaking layout */
h1, h2, h3, h4, h5, h6,
p, span, a, li {
    word-wrap: break-word;
    overflow-wrap: break-word;
}

/* ==========================================================================
   Responsive Sidebar Fixes
   ========================================================================== */

/* Mobile: sidebar becomes overlay */
@media (max-width: 767px) {
    /* Sidebar overlay mode on mobile */
    aside[class*="fixed"] {
        transform: translateX(-100%);
        transition: transform 0.3s ease;
    }

    aside[class*="fixed"].sidebar-open,
    [data-sidebar-open="true"] aside[class*="fixed"] {
        transform: translateX(0);
    }

    /* Remove margin-left dependency on mobile */
    div[class*="ml-72"],
    div[class*="ml-64"],
    div[class*="ml-20"] {
        margin-left: 0 !important;
    }

    /* Ensure main content fills viewport */
    .flex-1 {
        width: 100%;
        max-width: 100%;
    }
}

/* Tablet and up: sidebar pushes content */
@media (min-width: 768px) {
    /* Use max-width instead of fixed widths for better zoom behavior */
    aside[class*="w-72"] {
        max-width: 18rem;
        width: 18rem;
    }

    aside[class*="w-64"] {
        max-width: 16rem;
        width: 16rem;
    }

    aside[class*="w-20"] {
        max-width: 5rem;
        width: 5rem;
    }
}

/* ==========================================================================
   Navigation & Header Fixes
   ========================================================================== */

/* Prevent nav items from overflowing */
nav {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

/* Flex containers should wrap on small screens */
.flex {
    min-width: 0; /* Allow flex items to shrink below content size */
}

/* ==========================================================================
   Container & Layout Fixes
   ========================================================================== */

/* Ensure max-width containers don't exceed viewport */
.max-w-7xl,
.max-w-6xl,
.max-w-5xl,
.max-w-4xl,
.max-w-3xl,
.max-w-2xl,
.max-w-xl,
.max-w-lg,
.max-w-md,
.max-w-sm {
    max-width: min(var(--max-width), calc(100vw - 2rem));
}

/* Safe area insets for notched devices */
@supports (padding: max(0px)) {
    body {
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
        padding-bottom: env(safe-area-inset-bottom);
    }
}

/* ==========================================================================
   Table Responsiveness
   ========================================================================== */

/* Make tables horizontally scrollable on small screens */
.overflow-x-auto {
    -webkit-overflow-scrolling: touch;
}

table {
    min-width: 100%;
}

@media (max-width: 767px) {
    table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
    }
}
